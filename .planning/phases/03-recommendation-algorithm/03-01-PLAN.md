---
phase: 03-recommendation-algorithm
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - vitest.config.mts
  - package.json
autonomous: true

must_haves:
  truths:
    - "Running `npm test` launches Vitest and exits with code 0"
    - "A test file importing from `@/lib/restaurants` resolves the path alias correctly"
  artifacts:
    - path: "vitest.config.mts"
      provides: "Vitest configuration with path alias support"
      contains: "tsconfigPaths"
    - path: "package.json"
      provides: "test script"
      contains: '"test": "vitest"'
  key_links:
    - from: "vitest.config.mts"
      to: "tsconfig.json"
      via: "vite-tsconfig-paths plugin reads paths config"
      pattern: "tsconfigPaths"
---

<objective>
Install Vitest and configure it so `npm test` works with the existing `@/` path alias.

Purpose: Vitest is the prerequisite for all TDD work in this phase. Without it, no tests can run.
Output: vitest.config.mts, updated package.json scripts, vitest + vite-tsconfig-paths in devDependencies.
</objective>

<execution_context>
@/Users/diamond.hung/.claude/get-shit-done/workflows/execute-plan.md
@/Users/diamond.hung/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-recommendation-algorithm/03-RESEARCH.md

@tsconfig.json
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Vitest and vite-tsconfig-paths</name>
  <files>package.json</files>
  <action>
Run `npm install -D vitest vite-tsconfig-paths`.

Then add the `"test": "vitest"` script to package.json scripts section. The existing scripts are: dev, build, start, lint. Add test after lint.

Do NOT install @vitejs/plugin-react or @testing-library/react — those are not needed for pure function tests and would be premature for this phase.
  </action>
  <verify>
Run `npm ls vitest` — should show vitest installed.
Run `npm ls vite-tsconfig-paths` — should show installed.
Run `grep '"test"' package.json` — should show `"test": "vitest"`.
  </verify>
  <done>vitest and vite-tsconfig-paths are in devDependencies, "test" script exists in package.json</done>
</task>

<task type="auto">
  <name>Task 2: Create vitest.config.mts and verify path alias works</name>
  <files>vitest.config.mts, __tests__/smoke.test.ts</files>
  <action>
Create `vitest.config.mts` at project root with this exact content:

```typescript
import { defineConfig } from 'vitest/config'
import tsconfigPaths from 'vite-tsconfig-paths'

export default defineConfig({
  plugins: [tsconfigPaths()],
  test: {
    environment: 'node',
  },
})
```

Create a smoke test at `__tests__/smoke.test.ts` to verify the path alias works:

```typescript
import { describe, test, expect } from 'vitest'
import { DEFAULT_RESTAURANTS } from '@/lib/restaurants'

describe('vitest setup', () => {
  test('path alias resolves and restaurant data loads', () => {
    expect(DEFAULT_RESTAURANTS).toHaveLength(19)
    expect(DEFAULT_RESTAURANTS[0].price).toBeTypeOf('number')
  })
})
```

Run `npx vitest run` to execute the smoke test. It must pass.

After confirming the smoke test passes, DELETE the smoke test file `__tests__/smoke.test.ts` — it was only needed to verify setup. The real tests come in Plan 02.
  </action>
  <verify>
Run `npx vitest run` — should show 0 test files (smoke test was deleted) and exit 0.
Run `cat vitest.config.mts` — should contain tsconfigPaths plugin.
Confirm `__tests__/smoke.test.ts` does NOT exist (was deleted after verification).
  </verify>
  <done>vitest.config.mts exists with tsconfigPaths plugin, `npx vitest run` exits cleanly, path alias `@/` confirmed working</done>
</task>

</tasks>

<verification>
1. `npm test -- --run` exits with code 0
2. `vitest.config.mts` exists at project root
3. package.json has `"test": "vitest"` in scripts
4. vitest and vite-tsconfig-paths are in devDependencies
</verification>

<success_criteria>
- `npm test -- --run` completes without error
- The `@/` path alias resolves correctly in test files (verified by smoke test during execution)
- No unnecessary dependencies installed (no @vitejs/plugin-react, no @testing-library/react)
</success_criteria>

<output>
After completion, create `.planning/phases/03-recommendation-algorithm/03-01-SUMMARY.md`
</output>
