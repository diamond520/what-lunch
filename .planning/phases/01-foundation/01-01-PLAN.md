---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - next.config.ts
  - app/layout.tsx
  - app/page.tsx
  - app/globals.css
  - components.json
  - lib/utils.ts
autonomous: true

must_haves:
  truths:
    - "`npm run dev` starts without error"
    - "The project scaffold exists with App Router directory structure"
    - "TypeScript strict mode is enabled — `tsconfig.json` has `\"strict\": true`"
    - "shadcn/ui is initialized with new-york style — `components.json` has `\"style\": \"new-york\"`"
  artifacts:
    - path: "package.json"
      provides: "Next.js project dependencies"
      contains: "\"next\":"
    - path: "tsconfig.json"
      provides: "TypeScript config with strict mode"
      contains: "\"strict\": true"
    - path: "components.json"
      provides: "shadcn/ui configuration"
      contains: "\"style\": \"new-york\""
    - path: "app/layout.tsx"
      provides: "Root layout with html/body"
    - path: "lib/utils.ts"
      provides: "cn() utility for class merging"
      contains: "clsx"
  key_links:
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "import"
      pattern: "import.*globals\\.css"
    - from: "tsconfig.json"
      to: "paths"
      via: "@/ alias"
      pattern: "\"@/\\*\""
---

<objective>
Scaffold a new Next.js project in the current repo directory with TypeScript, Tailwind CSS v4, and shadcn/ui. Enable TypeScript strict mode immediately after scaffolding.

Purpose: Phase 1 requires a working Next.js App Router project as the foundation before any types or data can be written. This plan creates the entire project scaffold.
Output: A buildable Next.js 16 + TypeScript + Tailwind v4 + shadcn/ui (new-york) project ready to receive lib/types.ts and lib/restaurants.ts.
</objective>

<execution_context>
@/Users/diamond.hung/.claude/get-shit-done/workflows/execute-plan.md
@/Users/diamond.hung/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js project with create-next-app</name>
  <files>
    package.json
    tsconfig.json
    next.config.ts
    app/layout.tsx
    app/page.tsx
    app/globals.css
    .gitignore
  </files>
  <action>
    The current working directory is /Users/diamond.hung/ailabs/code/what-lunch — this is an existing Vue 2 repo. The Next.js scaffold must be created IN this directory (not a subdirectory), overwriting/coexisting with the old Vue files.

    Run create-next-app targeting the current directory:

    ```bash
    cd /Users/diamond.hung/ailabs/code/what-lunch
    npx create-next-app@latest . --yes --typescript --tailwind --eslint --app --src-dir no --import-alias "@/*"
    ```

    The `--yes` flag accepts all defaults. The flags above set: TypeScript=yes, Tailwind=yes, ESLint=yes, App Router=yes, no src/ directory, @/* alias. This produces Next.js 16 + Tailwind v4 + React 19.

    After scaffolding, immediately enable TypeScript strict mode:
    - Read `tsconfig.json` (create-next-app does NOT set strict:true by default)
    - Change `"strict": false` to `"strict": true` (or add `"strict": true` if missing)

    Also update `app/layout.tsx` to use the correct metadata for this project:
    ```typescript
    export const metadata: Metadata = {
      title: 'What Lunch?',
      description: 'Random lunch picker for Taipei restaurants',
    }
    ```
    Set `<html lang="zh-TW">` (not "en").

    Update `app/page.tsx` to a minimal placeholder (the old Vue 2 page.tsx will be overwritten by create-next-app anyway):
    ```typescript
    export default function HomePage() {
      return (
        <main className="p-8">
          <h1 className="text-2xl font-bold">What Lunch?</h1>
          <p className="text-muted-foreground mt-2">Loading...</p>
        </main>
      )
    }
    ```

    Do NOT create tailwind.config.js — Tailwind v4 uses CSS-first config via @theme in globals.css. The create-next-app scaffold handles this correctly.
  </action>
  <verify>
    Run: `npm run build` in /Users/diamond.hung/ailabs/code/what-lunch

    Expected: Build succeeds with no TypeScript errors. The output should show pages compiled. If the build fails due to TypeScript strict mode catching issues in scaffold files (e.g., in app/page.tsx), fix them.

    Also verify: `cat tsconfig.json | grep '"strict"'` returns `"strict": true`
  </verify>
  <done>
    - `npm run build` exits 0
    - `tsconfig.json` contains `"strict": true`
    - `app/layout.tsx` exists with `lang="zh-TW"` and title "What Lunch?"
    - `app/globals.css` exists (Tailwind v4 CSS-first, no tailwind.config.js present)
  </done>
</task>

<task type="auto">
  <name>Task 2: Initialize shadcn/ui with new-york style</name>
  <files>
    components.json
    lib/utils.ts
    app/globals.css
  </files>
  <action>
    Run shadcn init in non-interactive mode:

    ```bash
    cd /Users/diamond.hung/ailabs/code/what-lunch
    npx shadcn@latest init --defaults
    ```

    The `--defaults` flag uses new-york style, neutral base color, and CSS variables. If `--defaults` doesn't produce new-york style, run the interactive init instead:

    ```bash
    npx shadcn@latest init
    ```

    And select:
    - Style: `new-york` (NOT "default" — it is deprecated)
    - Base color: `neutral`
    - CSS variables: `yes`

    After init, verify `components.json` contains `"style": "new-york"`. If it shows `"style": "default"`, the wrong style was selected — re-run init.

    The init command:
    - Creates/updates `components.json` with the shadcn configuration
    - Creates/updates `lib/utils.ts` with the `cn()` function (clsx + tailwind-merge)
    - Updates `app/globals.css` to add shadcn CSS variables under `@layer base`

    Do NOT manually edit these files after shadcn init — the CLI manages them.
  </action>
  <verify>
    1. `cat components.json | grep '"style"'` returns `"style": "new-york"`
    2. `cat components.json | grep '"cssVariables"'` returns `"cssVariables": true`
    3. `lib/utils.ts` exists and contains `clsx` and `tailwind-merge`
    4. Run `npm run build` — must still pass after shadcn init modifies globals.css
  </verify>
  <done>
    - `components.json` has `"style": "new-york"` and `"cssVariables": true`
    - `lib/utils.ts` exports `cn()` using clsx + tailwind-merge
    - `npm run build` passes after shadcn init
  </done>
</task>

</tasks>

<verification>
After both tasks:
1. `npm run build` exits 0 with no TypeScript errors
2. `cat tsconfig.json | grep strict` shows `"strict": true`
3. `cat components.json | grep style` shows `"style": "new-york"`
4. `ls lib/utils.ts` exists
5. No `tailwind.config.js` exists in the project root (Tailwind v4 uses CSS-first)
</verification>

<success_criteria>
- `npm run build` completes successfully
- TypeScript strict mode is active
- shadcn/ui is initialized with new-york style
- `lib/utils.ts` has the `cn()` utility
- Project is ready to receive `lib/types.ts` and `lib/restaurants.ts` in the next plan
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
