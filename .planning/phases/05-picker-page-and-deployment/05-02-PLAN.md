---
phase: 05-picker-page-and-deployment
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "The production Vercel deployment builds without errors or warnings and serves all features correctly"
    - "The deployed URL serves the picker page with budget input, generate, and re-roll functionality"
    - "The deployed URL serves the restaurant management page at /restaurants"
  artifacts: []
  key_links: []
---

<objective>
Deploy the completed app to Vercel and verify the production deployment works.

Purpose: The app is feature-complete after Plan 01. This plan makes it live for the team to use.

Output: A working Vercel production deployment URL serving all features.
</objective>

<execution_context>
@/Users/diamond.hung/.claude/get-shit-done/workflows/execute-plan.md
@/Users/diamond.hung/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-picker-page-and-deployment/05-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify clean production build and deploy to Vercel</name>
  <files></files>
  <action>
**Step 1: Final build verification**
Run `npm run build` and confirm:
- `✓ Compiled successfully` with no TypeScript errors
- All routes show `○ (Static)`: `/`, `/_not-found`, `/restaurants`
- Zero warnings in output

Run `npx eslint src/` and confirm zero warnings.

Run `npx vitest run` and confirm all tests pass.

**Step 2: Deploy to Vercel**
Run `npx vercel --prod` from the project root.

If Vercel CLI prompts for login/auth:
- This is expected — STATE.md notes "GitHub auth not configured"
- The executor should attempt `npx vercel login` first
- If login requires browser interaction, create a checkpoint for the user

If Vercel CLI succeeds:
- Record the production URL from the output
- The URL will be in the format `https://what-lunch-*.vercel.app`

**Step 3: Verify deployment**
After deployment, verify the production URL serves:
- Home page (`/`) — loads without errors
- Restaurant management (`/restaurants`) — accessible via navigation

If the CLI deployment fails due to auth issues, fall back to documenting the alternative: push to GitHub and connect via Vercel dashboard.
  </action>
  <verify>
1. `npm run build` — zero errors, zero warnings
2. Vercel deployment output shows a production URL
3. Production URL is accessible (if verifiable via curl or browser)
  </verify>
  <done>
- Production build completes with zero errors and zero warnings
- Vercel deployment succeeds and returns a production URL
- The deployed app serves all pages correctly
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete app deployed to Vercel with weekly lunch picker, budget controls, re-roll, and restaurant management.</what-built>
  <how-to-verify>
1. Visit the Vercel production URL (provided after Task 1 deployment)
2. On the home page (`/`):
   a. Verify budget input shows default value of 750
   b. Click "產生本週午餐計畫" button
   c. Verify 5 cards appear (星期一 through 星期五)
   d. Each card shows: restaurant name, colored cuisine tag, price (NT$), distance (m), and a 重抽 button
   e. Change the budget to 500, verify the plan clears
   f. Click generate again, verify the plan respects the new budget (total cost <= 500)
   g. Click 重抽 on one card, verify only that card changes
3. Navigate to `/restaurants`:
   a. Verify restaurant table displays all entries
   b. Verify add/remove functionality works
4. Navigate back to `/` — verify the picker still works
5. Check browser console for any errors or warnings
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` — zero errors, zero warnings
2. Vercel production URL is live and accessible
3. All 5 success criteria from the phase are satisfied on the deployed site
</verification>

<success_criteria>
- Vercel deployment completes without errors
- Production URL serves the home page with picker functionality
- Production URL serves the /restaurants page
- No console errors or warnings in the browser
- The deployed app matches all Phase 5 success criteria
</success_criteria>

<output>
After completion, create `.planning/phases/05-picker-page-and-deployment/05-02-SUMMARY.md`
</output>
